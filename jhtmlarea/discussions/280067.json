[
  {
    "Id": "700456",
    "ThreadId": "280067",
    "Html": "\r\n<p>I've been fussing with this for a while now and I'm struggling to come up with the correct to align an inserted image so that the text will wrap around it.</p>\r\n<p>Right now, if you have an image selected and then click on the justify left or right buttons it will wrap it with a DIV and use text-align. Is there a way to make sure just the traditional align=&quot;right&quot; is added to the HTML instead?</p>\r\n<p>I'd really appreciate any suggestions.</p>\r\n",
    "PostedDate": "2011-11-18T14:57:09.627-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701286",
    "ThreadId": "280067",
    "Html": "<p>I came up with a solution that seems to work, and wanted to get some feedback on it. It pretty much works with brute force, but gets the job done. The only draw back is that I get an \"r.select\" is not a function error. Doesn't seem to affect the function though.</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>$(<span style=\"color: #a31515;\">\"#CmsElementContent\"</span>).htmlarea({\r\n\ttoolbar: [<span style=\"color: #a31515;\">\"html\"</span>, <span style=\"color: #a31515;\">\"|\"</span>,\r\n\t\t\t<span style=\"color: #a31515;\">\"forecolor\"</span>, <span style=\"color: #a31515;\">\"increaseFontSize\"</span>, <span style=\"color: #a31515;\">\"decreaseFontSize\"</span>,<span style=\"color: #a31515;\">\"orderedlist\"</span>, <span style=\"color: #a31515;\">\"unorderedlist\"</span>,\r\n\t\t\t<span style=\"color: #a31515;\">\"|\"</span>, <span style=\"color: #a31515;\">\"indent\"</span>, <span style=\"color: #a31515;\">\"outdent\"</span>, <span style=\"color: #a31515;\">\"justifyleft\"</span>, <span style=\"color: #a31515;\">\"justifycenter\"</span>, <span style=\"color: #a31515;\">\"justifyright\"</span>,\r\n\t\t\t<span style=\"color: #a31515;\">\"|\"</span>, <span style=\"color: #a31515;\">\"bold\"</span>, <span style=\"color: #a31515;\">\"italic\"</span>, <span style=\"color: #a31515;\">\"underline\"</span>, <span style=\"color: #a31515;\">\"|\"</span>, <span style=\"color: #a31515;\">\"h1\"</span>, <span style=\"color: #a31515;\">\"h2\"</span>, <span style=\"color: #a31515;\">\"h3\"</span>, <span style=\"color: #a31515;\">\"|\"</span>, <span style=\"color: #a31515;\">\"link\"</span>, <span style=\"color: #a31515;\">\"unlink\"</span>,                \r\n\t\t\t{\r\n\t\t\t\t<span style=\"color: green;\">// This is how to add a completely custom Toolbar Button</span>\r\n\t\t\t\tcss: <span style=\"color: #a31515;\">\"image\"</span>,\r\n\t\t\t\ttext: <span style=\"color: #a31515;\">\"Insert Image\"</span>,\r\n\t\t\t\taction: <span style=\"color: blue;\">function</span>(btn) {\r\n\t\t\t\t\t<span style=\"color: green;\">//Get Thumbnails and Insert img src</span>\r\n\t\t\t\t\t$(<span style=\"color: #a31515;\">'#select_images'</span>).show();\r\n\t\t\t\t}\r\n\t\t\t},                \r\n\t\t\t{\r\n\t\t\t\tcss: <span style=\"color: #a31515;\">\"imageLeft\"</span>,\r\n\t\t\t\ttext: <span style=\"color: #a31515;\">\"Align Image Left\"</span>,\r\n\t\t\t\taction: <span style=\"color: blue;\">function</span>(btn) {\r\n\t\t\t\t\t<span style=\"color: blue;\">var</span> img_tag = $(<span style=\"color: #a31515;\">\"&lt;p/&gt;\"</span>).append(<span style=\"color: blue;\">this</span>.getRange().cloneContents()).html();\r\n\t\t\t\t\t<span style=\"color: green;\">//No Alignment</span>\r\n\t\t\t\t\t<span style=\"color: blue;\">if</span>(img_tag.indexOf(<span style=\"color: #a31515;\">'align'</span>) &lt; 0){\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> split_string = img_tag.split(<span style=\"color: #a31515;\">'&lt;img '</span>);\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> fixed_html = <span style=\"color: #a31515;\">'&lt;img align=\"left\" '</span> + split_string[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span style=\"color: green;\">//Aligned Left</span>\r\n\t\t\t\t\t<span style=\"color: blue;\">if</span>(img_tag.indexOf(<span style=\"color: #a31515;\">'align=\"left\"'</span>) &gt; 0){\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> fixed_html = img_tag;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span style=\"color: green;\">//Aligned Right</span>\r\n\t\t\t\t\t<span style=\"color: blue;\">if</span>(img_tag.indexOf(<span style=\"color: #a31515;\">'align=\"right\"'</span>) &gt; 0){\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> split_string = img_tag.split(<span style=\"color: #a31515;\">'&lt;img align=\"right\" '</span>);\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> fixed_html = <span style=\"color: #a31515;\">'&lt;img align=\"left\" '</span> + split_string[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span style=\"color: blue;\">this</span>.pasteHTML(fixed_html);\r\n\t\t\t\t}\r\n\t\t\t},                \r\n\t\t\t{\r\n\t\t\t\tcss: <span style=\"color: #a31515;\">\"imageRight\"</span>,\r\n\t\t\t\ttext: <span style=\"color: #a31515;\">\"Align Image Right\"</span>,\r\n\t\t\t\taction: <span style=\"color: blue;\">function</span>(btn) {\t\t\t\t\t\t\t\r\n\t\t\t\t\t<span style=\"color: blue;\">var</span> img_tag = $(<span style=\"color: #a31515;\">\"&lt;p/&gt;\"</span>).append(<span style=\"color: blue;\">this</span>.getRange().cloneContents()).html();\r\n\t\t\t\t\t<span style=\"color: green;\">//No Alignment</span>\r\n\t\t\t\t\t<span style=\"color: blue;\">if</span>(img_tag.indexOf(<span style=\"color: #a31515;\">'align'</span>) &lt; 0){\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> split_string = img_tag.split(<span style=\"color: #a31515;\">'&lt;img '</span>);\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> fixed_html = <span style=\"color: #a31515;\">'&lt;img align=\"left\" '</span> + split_string[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span style=\"color: green;\">//Aligned Left</span>\r\n\t\t\t\t\t<span style=\"color: blue;\">if</span>(img_tag.indexOf(<span style=\"color: #a31515;\">'align=\"left\"'</span>) &gt; 0){\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> split_string = img_tag.split(<span style=\"color: #a31515;\">'&lt;img align=\"left\" '</span>);\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> fixed_html = <span style=\"color: #a31515;\">'&lt;img align=\"right\" '</span> + split_string[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span style=\"color: green;\">//Aligned Right</span>\r\n\t\t\t\t\t<span style=\"color: blue;\">if</span>(img_tag.indexOf(<span style=\"color: #a31515;\">'align=\"right\"'</span>) &gt; 0){\r\n\t\t\t\t\t\t<span style=\"color: blue;\">var</span> fixed_html = img_tag;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span style=\"color: blue;\">this</span>.pasteHTML(fixed_html);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n});\r\n\r\n</pre>\r\n</div>\r\n</p>",
    "PostedDate": "2011-11-21T08:25:21.6-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "720542",
    "ThreadId": "280067",
    "Html": "<p>Hi there,</p>\r\n<p>I've been aiming for the same thing, and I've come up with something based on this, but cannot get it to work, and I'm wondering if anyone has any pointers!</p>\r\n<p>I have this markup in my JhtmlArea, which when I flick between the HTML view and the friendly view shows a small image that I drew:</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">span</span><span style=\"color: blue;\">&gt;</span><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">img</span> <span style=\"color: red;\">src</span><span style=\"color: blue;\">=</span><span style=\"color: blue;\">\"/Content/UserData/Images/129701904676214107-content-small.png\"</span> <span style=\"color: red;\">alt</span><span style=\"color: blue;\">=</span><span style=\"color: blue;\">\"image\"</span> <span style=\"color: red;\">title</span><span style=\"color: blue;\">=</span><span style=\"color: blue;\">\"image\"</span> <span style=\"color: red;\">width</span><span style=\"color: blue;\">=</span><span style=\"color: blue;\">\"50\"</span> <span style=\"color: red;\">height</span><span style=\"color: blue;\">=</span><span style=\"color: blue;\">\"56\"</span><span style=\"color: blue;\">&gt;</span><span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">span</span><span style=\"color: blue;\">&gt;</span>\r\n</pre>\r\n</div>\r\n</p>\r\n<p>&nbsp;</p>\r\n<p>I have created an \"Align Right\" and when you click it, the image and the containing span tag disappear.</p>\r\n<p>When you flick back to the html view, all the above is gone from the markup in jhtmlArea. I use the following in the toolbar decalration:</p>\r\n<p>&nbsp;</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>{\r\n                   css: <span style=\"color: #a31515;\">\"imageright\"</span>,\r\n                   text: <span style=\"color: #a31515;\">\"Align image right\"</span>,\r\n                   action: <span style=\"color: blue;\">function</span> (btn) {\r\n                       <span style=\"color: green;\">// get the current selected markup (without creating the span it fails)</span>\r\n                       <span style=\"color: blue;\">var</span> imgTag = $(<span style=\"color: #a31515;\">\"&lt;span/&gt;\"</span>).append(<span style=\"color: blue;\">this</span>.getRange().cloneContents()).html();\r\n                       \r\n                       <span style=\"color: green;\">// these don't work</span>\r\n                       <span style=\"color: green;\">//while (imgTag.hasClass('img-left')) imgTag.removeClass('img-left');</span>\r\n                       <span style=\"color: green;\">//if (!imgTag.hasClass('img-right')) </span>\r\n                       \r\n                       <span style=\"color: green;\">// this adds correctly</span>\r\n                       imgTag = $(imgTag).addClass(<span style=\"color: #a31515;\">'img-right'</span>);\r\n                       \r\n                       <span style=\"color: green;\">// add into the jhtmlarea</span>\r\n                       <span style=\"color: blue;\">this</span>.pasteHTML(imgTag);\r\n                       \r\n                   }\r\n}\r\n</pre>\r\n</div>\r\n</p>\r\n<p>&nbsp;</p>\r\n<p>When I hover in Chrome / IE's developer tools script debugger, I can see clearly that imgTag correctly shows the element containing the class 'img-left' and I can see that basically the content is still there.</p>\r\n<p>Using this.pastHtml pastes the &lt;span&gt;&lt;/span&gt; without the image and pasteHTML pastes nothing whatsoever.</p>\r\n<p>&nbsp;</p>\r\n<p>Can anyone else pinpoint what's wrong?</p>\r\n<p>&nbsp;</p>\r\n<p>Cheers,</p>\r\n<p>Ben</p>",
    "PostedDate": "2012-01-04T15:04:10.673-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "721053",
    "ThreadId": "280067",
    "Html": "<p>All sorted. I created an align left, align right and remove Align buttons and the code looks like this:</p>\r\n<p>&nbsp;</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>\r\n<span style=\"color: green;\">// extension of jquery</span>\r\njQuery.fn.outerHTML=<span style=\"color: blue;\">function</span>(s){ \r\n<span style=\"color: blue;\">return</span> s ? <span style=\"color: blue;\">this</span>.before(s).remove() : jQuery(<span style=\"color: #a31515;\">\"&lt;p&gt;\"</span>).append(<span style=\"color: blue;\">this</span>.eq(0).clone()).html();};\r\n\r\n\r\n<span style=\"color: green;\">// and in the toolbar declaration:</span>\r\n\r\n{ css: <span style=\"color: #a31515;\">\"imageleft\"</span>, text: <span style=\"color: #a31515;\">\"Align image left\"</span>, action: <span style=\"color: blue;\">function</span> (btn) { <span style=\"color: blue;\">var</span> imgTag = <span style=\"color: blue;\">this</span>.getSelectedHTML(); <span style=\"color: blue;\">var</span> string = $(imgTag).removeClass(<span style=\"color: #a31515;\">'img-right'</span>).addClass(<span style=\"color: #a31515;\">'img-left'</span>).outerHTML(); <span style=\"color: blue;\">this</span>.pasteHTML(string); } }\r\n\r\n, { css: <span style=\"color: #a31515;\">\"imagenone\"</span>, text: <span style=\"color: #a31515;\">\"Remove image aligment\"</span>, action: <span style=\"color: blue;\">function</span> (btn) { <span style=\"color: blue;\">var</span> imgTag = <span style=\"color: blue;\">this</span>.getSelectedHTML(); <span style=\"color: blue;\">var</span> string = $(imgTag).removeClass(<span style=\"color: #a31515;\">'img-left'</span>).removeClass(<span style=\"color: #a31515;\">'img-right'</span>).outerHTML(); <span style=\"color: blue;\">this</span>.pasteHTML(string); } }\r\n\r\n, { css: <span style=\"color: #a31515;\">\"imageright\"</span>, text: <span style=\"color: #a31515;\">\"Align image right\"</span>, action: <span style=\"color: blue;\">function</span> (btn) { <span style=\"color: blue;\">var</span> imgTag = <span style=\"color: blue;\">this</span>.getSelectedHTML(); <span style=\"color: blue;\">var</span> string = $(imgTag).removeClass(<span style=\"color: #a31515;\">'img-left'</span>).addClass(<span style=\"color: #a31515;\">'img-right'</span>).outerHTML(); <span style=\"color: blue;\">this</span>.pasteHTML(string); } }\r\n\r\n</pre>\r\n</div>\r\n</p>\r\n<p>Only thing left to work out is how to make the jHtmlArea honour the alignment. It works in my page, but it needs to work in the editor.</p>\r\n<p>Simple CSS:</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: #a31515;\">img.img-left </span>{ <span style=\"color: red;\">float</span>: <span style=\"color: blue;\">left</span>;<span style=\"color: red;\">margin-right</span>: <span style=\"color: blue;\">30px</span>; <span style=\"color: red;\">display</span>: <span style=\"color: blue;\">block</span>; }\r\n<span style=\"color: #a31515;\">img.img-right </span>{ <span style=\"color: red;\">float</span>: <span style=\"color: blue;\">right</span>; <span style=\"color: red;\">margin-left</span>: <span style=\"color: blue;\">30px</span>; <span style=\"color: red;\">display</span>: <span style=\"color: blue;\">block</span>; }\r\n</pre>\r\n</div>\r\n</p>\r\n<p>Also, what's with all the span tags being added every time a button is pressed?</p>",
    "PostedDate": "2012-01-05T13:53:05.963-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]